{"ast":null,"code":"var _jsxFileName = \"D:\\\\gitProjects\\\\smart-brain\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport react, { useState, useEffect } from 'react';\nimport Navigation from './components/Navigation/Navigation.js';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm';\nimport Rank from './components/Rank/Rank';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport Signin from './components/Signin/Signin';\nimport Register from './components/Register/Register';\nimport Particles from 'react-particles-js';\n/*\n  Particles API used for the background\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst particlesOptions = {\n  particles: {\n    number: {\n      value: 30,\n      density: {\n        enable: true,\n        value_area: 185\n      }\n    }\n  }\n};\n\nconst App = () => {\n  _s();\n\n  const [input, setInput] = useState('');\n  const [imageUrl, setImageUrl] = useState('');\n  const [box, setBox] = useState([{}]);\n  const [route, setRoute] = useState('signin');\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  const [user, setUser] = useState({\n    id: '',\n    name: '',\n    email: '',\n    password: '',\n    entries: '',\n    joined: ''\n  });\n\n  const setInitialState = () => {\n    setInput('');\n    setImageUrl('');\n    setBox([{}]);\n    setRoute('signin');\n    setIsSignedIn(false);\n    setUser({\n      id: '',\n      name: '',\n      email: '',\n      password: '',\n      entries: '',\n      joined: ''\n    });\n  };\n  /*\n    Function that calculates face location based on coordinates given by CLARIFAI API\n    Returns an array with all the coordinates\n  */\n\n\n  const calculateFaceLocation = data => {\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    const faceCoordinates = data.outputs[0].data.regions;\n    let facesDetected = [];\n    faceCoordinates.forEach(face => {\n      const clarifaiFace = face.region_info.bounding_box;\n      const coordinates = {\n        leftCol: clarifaiFace.left_col * width,\n        topRow: clarifaiFace.top_row * height,\n        rightCol: width - clarifaiFace.right_col * width,\n        bottomRow: height - clarifaiFace.bottom_row * height\n      };\n      facesDetected.push(coordinates);\n    });\n    return facesDetected;\n  };\n  /*\n    when the user submits the image link, this function send a request to the server.\n    the server handles the CLARIFAI API call, to detect all the faces.\n    The server send a response with all the detected faces, and calculateFaceLocation does the rest.\n    this response brings us in another fetch to the backend, to update the entries\n  */\n\n\n  const onSubmit = () => {\n    setImageUrl(input.target.value);\n    fetch(\"https://ancient-forest-08678.herokuapp.com/imageurl\", {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        input: input.target.value\n      })\n    }).then(response => response.json()).then(response => {\n      if (response) {\n        fetch(\"https://ancient-forest-08678.herokuapp.com/image\", {\n          method: 'put',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: user.id //send the id to the server. it will update that user's count\n\n          })\n        }).then(response => response.json()).then(count => {\n          setUser({ ...user,\n            entries: count\n          });\n        }).catch(console.log);\n        setBox(calculateFaceLocation(response));\n      }\n    }).catch(e => console.log('error', e));\n  };\n\n  let section;\n\n  if (route === 'signin') {\n    section = /*#__PURE__*/_jsxDEV(Signin, {\n      loadUser: user => setUser(user),\n      onRouteChange: route => setRoute(route),\n      isSignedIn: value => setIsSignedIn(value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 22\n    }, this);\n  } else if (route === 'register') {\n    section = /*#__PURE__*/_jsxDEV(Register, {\n      loadUser: user => setUser(user),\n      onRouteChange: route => setRoute(route)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 22\n    }, this);\n  } else {\n    section = /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Rank, {\n        userName: user.name,\n        entries: user.entries\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ImageLinkForm, {\n        onInputChange: link => setInput(link),\n        onSubmit: () => onSubmit()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(FaceRecognition, {\n        boxes: box,\n        imageUrl: imageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {\n      isSignedIn: isSignedIn,\n      onRouteChange: route => setRoute(route),\n      setInitialState: () => setInitialState()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Particles, {\n      params: particlesOptions,\n      className: \"particles\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this), section]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 7\n  }, this);\n};\n\n_s(App, \"gC0WebGOtVJZtvpBGEBKCxMcUkg=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/gitProjects/smart-brain/src/App.js"],"names":["react","useState","useEffect","Navigation","Logo","ImageLinkForm","Rank","FaceRecognition","Signin","Register","Particles","particlesOptions","particles","number","value","density","enable","value_area","App","input","setInput","imageUrl","setImageUrl","box","setBox","route","setRoute","isSignedIn","setIsSignedIn","user","setUser","id","name","email","password","entries","joined","setInitialState","calculateFaceLocation","data","image","document","getElementById","width","Number","height","faceCoordinates","outputs","regions","facesDetected","forEach","face","clarifaiFace","region_info","bounding_box","coordinates","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","push","onSubmit","target","fetch","method","headers","body","JSON","stringify","then","response","json","count","catch","console","log","e","section","link"],"mappings":"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","sourcesContent":["import './App.css';\nimport react, {useState, useEffect } from 'react';\nimport Navigation from './components/Navigation/Navigation.js';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm';\nimport Rank from './components/Rank/Rank';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport Signin from './components/Signin/Signin';\nimport Register from './components/Register/Register';\nimport Particles from 'react-particles-js';\n\n/*\n  Particles API used for the background\n*/\nconst particlesOptions = {\nparticles: {                 \n  number: {\n    value: 30,\n    density:{\n      enable:true,\n      value_area:185,\n      }\n    }\n  }\n}                \n\nconst App = () => {\n\n  const [input, setInput] = useState('');\n  const [imageUrl, setImageUrl] = useState('');\n  const [box, setBox] = useState([{}]);\n  const [route, setRoute] = useState('signin');\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  const [user, setUser] = useState({\n                                    id: '',\n                                    name: '',\n                                    email: '',\n                                    password: '',\n                                    entries: '',\n                                    joined: '',\n                                  });\n\n  const setInitialState = () =>{\n  setInput('');\n  setImageUrl('');\n  setBox([{}]);\n  setRoute('signin');\n  setIsSignedIn(false);\n  setUser({\n            id: '',\n            name: '',\n            email: '',\n            password: '',\n            entries: '',\n            joined: '',\n          });\n}\n/*\n  Function that calculates face location based on coordinates given by CLARIFAI API\n  Returns an array with all the coordinates\n*/\n  const calculateFaceLocation = (data) =>{\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    const faceCoordinates = data.outputs[0].data.regions;\n    let facesDetected = [];\n\n    faceCoordinates.forEach(face=>{\n      const clarifaiFace = face.region_info.bounding_box\n      const coordinates = {\n        leftCol: (clarifaiFace.left_col) * width,\n        topRow: (clarifaiFace.top_row) * height,\n        rightCol: width - (clarifaiFace.right_col * width),\n        bottomRow: height - (clarifaiFace.bottom_row * height)\n      }\n      facesDetected.push(coordinates);\n    })\n\n    return facesDetected;\n  }\n\n  /*\n    when the user submits the image link, this function send a request to the server.\n    the server handles the CLARIFAI API call, to detect all the faces.\n    The server send a response with all the detected faces, and calculateFaceLocation does the rest.\n    this response brings us in another fetch to the backend, to update the entries\n  */\n  const onSubmit = () =>{\n    setImageUrl(input.target.value);\n    fetch (\"https://ancient-forest-08678.herokuapp.com/imageurl\", {\n          method : 'post',\n          headers: {'Content-Type': 'application/json'},\n          body: JSON.stringify({\n            input: input.target.value\n            })\n          })\n    .then (response => response.json())\n    .then(response=>{\n        if (response){\n          fetch (\"https://ancient-forest-08678.herokuapp.com/image\", {\n          method : 'put',\n          headers: {'Content-Type': 'application/json'},\n          body: JSON.stringify({\n            id: user.id//send the id to the server. it will update that user's count\n            })\n          })\n          .then(response => response.json())\n          .then(count =>{\n              setUser({...user, entries: count});\n          }).catch(console.log);\n\n          setBox(calculateFaceLocation(response));\n        }\n      })\n    .catch(e=>console.log('error',e))\n  }\n\n    let section;\n\n    if (route === 'signin'){\n          section = (<Signin loadUser={(user)=> setUser(user)} onRouteChange={(route) => setRoute(route)} isSignedIn = {(value)=> setIsSignedIn(value)}/>);\n      }else if(route === 'register'){\n          section = (<Register loadUser = {(user)=> setUser(user)} onRouteChange = {(route) => setRoute(route)}/>);\n      }else{\n          section = (\n          <div>     \n            <Logo /> \n            <Rank userName = {user.name} entries = {user.entries}/>\n            <ImageLinkForm onInputChange={(link) => setInput(link)} onSubmit={()=>onSubmit()}/>\n            <FaceRecognition boxes = {box} imageUrl={imageUrl}/>\n          </div>\n        )\n      }\n\n    return (\n      <div className=\"App\">\n        <Navigation isSignedIn={isSignedIn} onRouteChange = {(route) => setRoute(route)} setInitialState = {()=>setInitialState()}/>\n        <Particles params={particlesOptions} className='particles'/>\n        {section}\n      </div>\n    );\n    \n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}